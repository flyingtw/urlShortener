<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>url Shortner</title>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script>
            $(document).ready(function(){
                $(".result").hide();
                $(".ajaxSend").on("click",function(){
                    var url = $('input[name=url]').val();
                    $.ajax({
                        url :"/ajax",
                        type : "POST",
                        dataType : "JSON",
                        data : {"url" : url}
                    })

                    .done(function(json){
                        $(".already").text(json.status);
                        $(".result").text(json.url);
                        $(".result").show();
                    })

                    .fail(function(xhr, status, errorThrown){
                        alert("Ajax failed")
                    })
                });

                //shorten 된 url을 클릭 하였을시
                $(".result").click(function(){
                    
                    var shortURL = $('.result').val();
                    alert(shortURL);
                })
            });
        </script>
        <!--
        <style type='text/css'>
            @import url("mystyle.scss");
        </style>
        <link rel="stylesheet" href="mystyle.scss">
        -->
    </head>


    <body>

        <div class="container">
            <h1>
                URL SHORTNER
            </h1>
            <div class="container__item">
                <form action="ajax" method="POST" class="form">
                    <input type="text" name="url" class="form__field" placeholder="URL 입력" />
                    <button type="button" class="ajaxSend btn--primary btn--inside uppercase">변환하기</button>
                </form>
            </div>
            <div class="already"></div>
            <div>
                <div class="result">
                    <button type="button" class="ajaxSend btn--primary btn--inside uppercase">클립보드 복사</button>
                </div>
            </div>
            
            <div class="container__item container__item--bottom">
                <p>전체 목록을 보고싶다면? <a href="http://localhost:8080/list" target="_blank">여기를 클릭!</p>
            </div>
        </div>

        
    </body>

</html>